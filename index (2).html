<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confessions â€” Share Your Truth</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #08080e; --bg2: #111118; --card: #16161f; --card2: #1e1e2a;
            --accent: #ff6b9d; --accent2: #c44569; --blue: #5b8dee; --gold: #f7c948;
            --text: #eeeef5; --muted: #7a7a92; --border: #252535;
            --font-display: 'Bebas Neue', sans-serif; --font-body: 'Crimson Text', serif;
        }
        * { margin:0;padding:0;box-sizing:border-box; }
        html { scroll-behavior:smooth; }
        body { font-family:var(--font-body);background:var(--bg);color:var(--text);line-height:1.7;overflow-x:hidden;min-height:100vh; }

        .bg-layer { position:fixed;inset:0;z-index:0;pointer-events:none;background:radial-gradient(ellipse 80% 60% at 10% 10%,rgba(255,107,157,.13) 0%,transparent 60%),radial-gradient(ellipse 60% 80% at 90% 80%,rgba(91,141,238,.10) 0%,transparent 60%),radial-gradient(ellipse 50% 50% at 50% 50%,rgba(138,43,226,.07) 0%,transparent 70%);animation:bgPulse 18s ease-in-out infinite; }
        @keyframes bgPulse { 0%,100%{opacity:1}50%{opacity:.7} }
        .noise { position:fixed;inset:0;z-index:1;pointer-events:none;opacity:.035;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='4' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E"); }
        .orb { position:fixed;border-radius:50%;filter:blur(90px);opacity:.35;pointer-events:none;z-index:0; }
        .orb-1 { width:550px;height:550px;background:radial-gradient(circle,rgba(255,107,157,.55) 0%,transparent 70%);top:-220px;right:-220px;animation:o1 28s ease-in-out infinite; }
        .orb-2 { width:420px;height:420px;background:radial-gradient(circle,rgba(91,141,238,.45) 0%,transparent 70%);bottom:-160px;left:-160px;animation:o2 22s ease-in-out infinite; }
        .orb-3 { width:320px;height:320px;background:radial-gradient(circle,rgba(247,201,72,.30) 0%,transparent 70%);top:40%;right:10%;animation:o3 35s ease-in-out infinite; }
        @keyframes o1 { 0%,100%{transform:translate(0,0)}50%{transform:translate(-80px,80px)} }
        @keyframes o2 { 0%,100%{transform:translate(0,0)}50%{transform:translate(80px,-60px)} }
        @keyframes o3 { 0%,100%{transform:translate(0,0)}50%{transform:translate(-60px,60px)} }

        .wrap { max-width:1180px;margin:0 auto;padding:0 1.5rem;position:relative;z-index:10; }

        /* Nav */
        nav { position:sticky;top:0;z-index:100;background:rgba(8,8,14,.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:.9rem 0; }
        .nav-inner { display:flex;justify-content:space-between;align-items:center; }
        .nav-logo { font-family:var(--font-display);font-size:1.8rem;letter-spacing:.1em; }
        .nav-logo span { color:var(--accent); }
        .nav-btn { background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;color:#fff;padding:.6rem 1.6rem;font-family:var(--font-display);font-size:1rem;letter-spacing:.08em;border-radius:50px;cursor:pointer;box-shadow:0 4px 20px rgba(255,107,157,.35);transition:all .3s ease; }
        .nav-btn:hover { transform:translateY(-2px);box-shadow:0 8px 30px rgba(255,107,157,.5); }

        /* Hero */
        @keyframes fadeDown { from{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)} }
        @keyframes fadeIn { from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)} }
        .hero { text-align:center;padding:7rem 0 4rem;animation:fadeDown 1s ease-out; }
        .hero-eyebrow { display:inline-flex;align-items:center;gap:.5rem;background:rgba(255,107,157,.12);border:1px solid rgba(255,107,157,.25);color:var(--accent);padding:.4rem 1.2rem;border-radius:50px;font-size:.85rem;text-transform:uppercase;letter-spacing:.12em;margin-bottom:2rem;animation:fadeIn .8s .2s both; }
        .eyebrow-dot { width:6px;height:6px;background:var(--accent);border-radius:50%;animation:blink 1.5s ease-in-out infinite; }
        @keyframes blink { 0%,100%{opacity:1}50%{opacity:.2} }
        .hero-title { font-family:var(--font-display);font-size:clamp(4rem,12vw,9rem);letter-spacing:.08em;line-height:1;background:linear-gradient(135deg,#fff 30%,var(--accent) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:1rem;animation:fadeIn .8s .4s both; }
        .hero-sub { font-size:1.35rem;color:var(--muted);font-style:italic;margin-bottom:3rem;animation:fadeIn .8s .6s both; }
        .hero-cta { display:inline-flex;align-items:center;gap:.8rem;background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;color:#fff;padding:1.1rem 2.8rem;font-family:var(--font-display);font-size:1.2rem;letter-spacing:.1em;border-radius:50px;cursor:pointer;box-shadow:0 12px 40px rgba(255,107,157,.45);transition:all .4s cubic-bezier(.34,1.56,.64,1);animation:fadeIn .8s .8s both;position:relative;overflow:hidden; }
        .hero-cta:hover { transform:translateY(-4px) scale(1.04);box-shadow:0 20px 60px rgba(255,107,157,.6); }
        .cta-arrow { transition:transform .3s; }
        .hero-cta:hover .cta-arrow { transform:translateX(5px); }

        /* Stats */
        .stats { display:flex;justify-content:center;align-items:center;gap:2.5rem;padding:1.5rem 2.5rem;margin:0 auto 5rem;max-width:600px;background:rgba(22,22,31,.7);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:20px;animation:fadeIn .8s 1s both; }
        .stat { text-align:center; }
        .stat-n { font-family:var(--font-display);font-size:2.5rem;color:var(--accent);line-height:1; }
        .stat-l { font-size:.78rem;color:var(--muted);text-transform:uppercase;letter-spacing:.1em;margin-top:.2rem; }
        .stat-div { width:1px;height:50px;background:var(--border); }

        /* Section headers */
        .section-head { display:flex;align-items:center;gap:1rem;margin-bottom:2rem; }
        .section-icon { font-size:1.5rem; }
        .section-title { font-family:var(--font-display);font-size:2.2rem;letter-spacing:.08em; }
        .section-badge { margin-left:auto;background:rgba(247,201,72,.15);color:var(--gold);border:1px solid rgba(247,201,72,.3);padding:.3rem .9rem;border-radius:50px;font-size:.75rem;text-transform:uppercase;letter-spacing:.1em; }

        /* Trending */
        .trending-section { margin-bottom:5rem; }
        .trending-grid { display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.25rem; }
        @keyframes cardIn { from{opacity:0;transform:translateY(20px) scale(.97)}to{opacity:1;transform:none} }
        .trending-card { background:var(--card);border:1px solid var(--border);border-radius:16px;padding:1.75rem;position:relative;overflow:hidden;transition:all .35s cubic-bezier(.34,1.56,.64,1);animation:cardIn .5s ease-out backwards; }
        .trending-card::after { content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,107,157,.08),rgba(91,141,238,.04));opacity:0;transition:opacity .35s; }
        .trending-card:hover { transform:translateY(-6px);border-color:var(--accent);box-shadow:0 16px 50px rgba(255,107,157,.25); }
        .trending-card:hover::after { opacity:1; }
        .trending-rank { font-family:var(--font-display);font-size:3.5rem;line-height:1;color:var(--border);position:absolute;top:1rem;right:1.25rem;transition:color .3s; }
        .trending-card:hover .trending-rank { color:rgba(255,107,157,.2); }
        .rank-1 { border-color:rgba(247,201,72,.2); }
        .rank-1 .trending-rank { color:rgba(247,201,72,.25); }
        .rank-1:hover { border-color:var(--gold);box-shadow:0 16px 50px rgba(247,201,72,.2); }
        .rank-1:hover .trending-rank { color:rgba(247,201,72,.4); }
        .trending-text { font-size:1.05rem;line-height:1.75;color:var(--text);margin-bottom:1.25rem;position:relative;z-index:1;padding-right:2.5rem; }
        .trending-footer { display:flex;justify-content:space-between;align-items:center;position:relative;z-index:1; }

        /* Like button */
        .like-btn { display:inline-flex;align-items:center;gap:.4rem;background:rgba(255,107,157,.1);border:1px solid rgba(255,107,157,.2);color:var(--accent);padding:.35rem .9rem;border-radius:50px;font-size:.875rem;cursor:pointer;font-family:var(--font-body);transition:all .25s ease;user-select:none; }
        .like-btn:hover { background:rgba(255,107,157,.2);transform:scale(1.05); }
        .like-btn.liked { background:var(--accent);color:#fff;border-color:var(--accent); }
        .like-heart { font-size:1rem;transition:transform .2s; }
        .like-btn:hover .like-heart { transform:scale(1.3); }
        @keyframes heartPop { 0%{transform:scale(1)}50%{transform:scale(1.5)}100%{transform:scale(1)} }
        .like-btn.liked .like-heart { animation:heartPop .3s ease; }

        .card-tag { background:rgba(91,141,238,.12);color:var(--blue);border:1px solid rgba(91,141,238,.2);padding:.3rem .8rem;border-radius:50px;font-size:.72rem;text-transform:uppercase;letter-spacing:.1em;font-family:var(--font-display); }

        /* Filters */
        .filter-section { margin-bottom:2rem; }
        .filter-bar { display:flex;gap:.6rem;flex-wrap:wrap;padding:1.25rem 1.5rem;background:rgba(22,22,31,.7);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:16px; }
        .filter-btn { background:transparent;border:1px solid var(--border);color:var(--muted);padding:.45rem 1.1rem;border-radius:50px;font-size:.85rem;cursor:pointer;font-family:var(--font-body);transition:all .25s ease; }
        .filter-btn:hover { border-color:var(--accent);color:var(--accent); }
        .filter-btn.active { background:linear-gradient(135deg,var(--accent),var(--accent2));border-color:transparent;color:#fff;box-shadow:0 4px 15px rgba(255,107,157,.35); }

        /* All confessions */
        .all-section { margin-bottom:5rem; }
        .confessions-grid { display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:1.5rem;margin-bottom:2.5rem; }
        .confession-card { background:var(--card);border:1px solid var(--border);border-radius:16px;padding:2rem;position:relative;overflow:hidden;transition:all .35s cubic-bezier(.34,1.56,.64,1);animation:cardIn .5s ease-out backwards; }
        .confession-card::before { content:'"';position:absolute;top:-8px;left:12px;font-size:6rem;color:var(--accent);opacity:.06;font-family:Georgia,serif;line-height:1;pointer-events:none; }
        .confession-card::after { content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,107,157,.07),rgba(91,141,238,.03));opacity:0;transition:opacity .35s; }
        .confession-card:hover { transform:translateY(-6px);border-color:rgba(255,107,157,.4);box-shadow:0 16px 50px rgba(255,107,157,.2); }
        .confession-card:hover::after { opacity:1; }
        .confession-text { font-size:1.05rem;line-height:1.8;color:var(--text);margin-bottom:1.5rem;position:relative;z-index:1; }
        .confession-footer { display:flex;justify-content:space-between;align-items:center;padding-top:.9rem;border-top:1px solid var(--border);position:relative;z-index:1; }
        .confession-date { font-size:.82rem;color:var(--muted);font-style:italic; }

        .load-more-wrap { text-align:center; }
        .load-more-btn { background:transparent;border:2px solid var(--accent);color:var(--accent);padding:.9rem 2.8rem;font-family:var(--font-display);font-size:1rem;letter-spacing:.1em;border-radius:50px;cursor:pointer;transition:all .3s ease; }
        .load-more-btn:hover { background:var(--accent);color:#fff;transform:translateY(-2px);box-shadow:0 10px 30px rgba(255,107,157,.4); }
        .empty-state { text-align:center;padding:4rem 2rem;color:var(--muted);font-style:italic;font-size:1.1rem; }

        /* Modal */
        .modal-overlay { position:fixed;inset:0;background:rgba(8,8,14,.96);backdrop-filter:blur(12px);display:none;align-items:center;justify-content:center;z-index:1000;padding:1.5rem; }
        .modal-overlay.active { display:flex; }
        @keyframes modalIn { from{opacity:0;transform:translateY(40px) scale(.93)}to{opacity:1;transform:none} }
        .modal-box { background:var(--card);border:1px solid var(--border);border-radius:24px;padding:2.5rem;max-width:580px;max-height:90vh;overflow-y:auto;width:100%;text-align:center;animation:modalIn .4s cubic-bezier(.34,1.56,.64,1);position:relative; }
        .modal-close { position:absolute;top:1.25rem;right:1.25rem;background:transparent;border:none;color:var(--muted);cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s; }
        .modal-close:hover { background:var(--border);color:var(--accent);transform:rotate(90deg); }
        .modal-icon { color:var(--accent);margin-bottom:1.25rem;opacity:.85; }
        .modal-title { font-family:var(--font-display);font-size:2.25rem;letter-spacing:.06em;margin-bottom:.75rem; }
        .modal-sub { color:var(--muted);margin-bottom:2rem;line-height:1.7;font-size:1rem; }

        /* Confession form */
        .confession-form { text-align:left; }
        .form-label { display:block;font-size:.85rem;text-transform:uppercase;letter-spacing:.1em;color:var(--muted);margin-bottom:.6rem;font-family:var(--font-display); }
        .form-textarea {
            width:100%;background:var(--bg2);border:1px solid var(--border);
            color:var(--text);padding:1.1rem 1.25rem;border-radius:12px;
            font-family:var(--font-body);font-size:1.1rem;line-height:1.7;
            resize:vertical;min-height:140px;
            transition:border-color .25s,box-shadow .25s;
            outline:none;
        }
        .form-textarea:focus { border-color:var(--accent);box-shadow:0 0 0 3px rgba(255,107,157,.15); }
        .form-textarea::placeholder { color:var(--muted);font-style:italic; }
        .char-count { text-align:right;font-size:.8rem;color:var(--muted);margin-top:.4rem;margin-bottom:1.25rem; }
        .char-count.warn { color:var(--gold); }
        .char-count.over { color:#ff4f4f; }

        .form-select-row { display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.5rem; }
        .form-group { display:flex;flex-direction:column; }
        .form-select {
            background:var(--bg2);border:1px solid var(--border);
            color:var(--text);padding:.75rem 1rem;border-radius:12px;
            font-family:var(--font-body);font-size:1rem;
            outline:none;cursor:pointer;
            transition:border-color .25s;
            appearance:none;
            background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%237a7a92' stroke-width='1.5' fill='none'/%3E%3C/svg%3E");
            background-repeat:no-repeat;background-position:right 1rem center;
            padding-right:2.5rem;
        }
        .form-select:focus { border-color:var(--accent); }
        .form-select option { background:var(--card); }

        .submit-confession-btn {
            width:100%;background:linear-gradient(135deg,var(--accent),var(--accent2));
            border:none;color:#fff;padding:1rem;
            font-family:var(--font-display);font-size:1.2rem;letter-spacing:.1em;
            border-radius:12px;cursor:pointer;
            box-shadow:0 8px 30px rgba(255,107,157,.4);
            transition:all .3s ease;position:relative;overflow:hidden;
        }
        .submit-confession-btn:hover:not(:disabled) { transform:translateY(-2px);box-shadow:0 12px 40px rgba(255,107,157,.6); }
        .submit-confession-btn:disabled { opacity:.5;cursor:not-allowed; }

        /* Success state */
        .success-state { display:none;text-align:center;padding:2rem 0; }
        .success-state.show { display:block; }
        .success-icon { font-size:4rem;margin-bottom:1rem;animation:successPop .5s cubic-bezier(.34,1.56,.64,1); }
        @keyframes successPop { from{transform:scale(0)}to{transform:scale(1)} }
        .success-title { font-family:var(--font-display);font-size:2rem;letter-spacing:.06em;margin-bottom:.75rem;color:var(--accent); }
        .success-text { color:var(--muted);line-height:1.7; }
        .success-back { margin-top:1.5rem;background:transparent;border:2px solid var(--accent);color:var(--accent);padding:.7rem 2rem;border-radius:50px;font-family:var(--font-display);font-size:1rem;letter-spacing:.08em;cursor:pointer;transition:all .3s; }
        .success-back:hover { background:var(--accent);color:#fff; }

        /* Toast */
        .toast { position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(100px);background:var(--card2);border:1px solid var(--border);color:var(--text);padding:.9rem 2rem;border-radius:50px;font-size:.95rem;z-index:2000;transition:transform .4s cubic-bezier(.34,1.56,.64,1);white-space:nowrap; }
        .toast.show { transform:translateX(-50%) translateY(0); }
        .toast.error { border-color:rgba(255,79,79,.4);color:#ff4f4f; }

        /* Loading spinner */
        .spinner { display:inline-block;width:18px;height:18px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .7s linear infinite;vertical-align:middle;margin-right:.5rem; }
        @keyframes spin { to{transform:rotate(360deg)} }

        /* Pending badge */
        .pending-note { background:rgba(247,201,72,.1);border:1px solid rgba(247,201,72,.25);color:var(--gold);padding:.5rem 1rem;border-radius:8px;font-size:.82rem;margin-top:1.5rem;text-align:center; }

        footer { border-top:1px solid var(--border);padding:2.5rem 0;text-align:center;color:var(--muted);font-size:.875rem; }
        footer span { color:var(--accent); }

        @media(max-width:768px) {
            .hero { padding:4rem 0 3rem; }
            .stats { gap:1.5rem;padding:1.25rem; }
            .trending-grid,.confessions-grid { grid-template-columns:1fr; }
            .form-select-row { grid-template-columns:1fr; }
            .modal-box { padding:2rem; }
        }
        @media(max-width:480px) {
            .stats { flex-direction:column;gap:1.25rem; }
            .stat-div { width:60%;height:1px; }
        }
    </style>
</head>
<body>
    <div class="bg-layer"></div>
    <div class="noise"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <nav>
        <div class="wrap nav-inner">
            <div class="nav-logo">CON<span>FESS</span>IONS</div>
            <button class="nav-btn" id="navShareBtn">+ Share a secret</button>
        </div>
    </nav>

    <div class="wrap">
        <section class="hero">
            <div class="hero-eyebrow"><span class="eyebrow-dot"></span>Anonymous &amp; Safe</div>
            <h1 class="hero-title">CONFESSIONS</h1>
            <p class="hero-sub">Whisper your truth into the void</p>
            <button class="hero-cta" id="heroShareBtn">Share a secret <span class="cta-arrow">â†’</span></button>
        </section>

        <div class="stats">
            <div class="stat"><div class="stat-n" id="totalCount">â€”</div><div class="stat-l">Secrets</div></div>
            <div class="stat-div"></div>
            <div class="stat"><div class="stat-n" id="totalLikes">â€”</div><div class="stat-l">Total Likes</div></div>
            <div class="stat-div"></div>
            <div class="stat"><div class="stat-n">100%</div><div class="stat-l">Anonymous</div></div>
        </div>

        <section class="trending-section">
            <div class="section-head">
                <span class="section-icon">ğŸ”¥</span>
                <h2 class="section-title">Trending</h2>
                <span class="section-badge">Most Liked</span>
            </div>
            <div class="trending-grid" id="trendingGrid"></div>
        </section>

        <section class="all-section">
            <div class="section-head">
                <span class="section-icon">ğŸ’¬</span>
                <h2 class="section-title">All Confessions</h2>
            </div>
            <div class="filter-section">
                <div class="filter-bar" id="filterBar"></div>
            </div>
            <div class="confessions-grid" id="allGrid"></div>
            <div class="load-more-wrap">
                <button class="load-more-btn" id="loadMoreBtn">Load more secrets</button>
            </div>
        </section>
    </div>

    <footer>
        <div class="wrap"><p>Made with <span>â™¥</span> for honest souls Â· 100% anonymous Â· no judgment</p></div>
    </footer>

    <!-- Modal -->
    <div class="modal-overlay" id="modal">
        <div class="modal-box">
            <button class="modal-close" id="modalClose">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>

            <!-- Form view -->
            <div id="formView">
                <div class="modal-icon">
                    <svg width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                </div>
                <h3 class="modal-title">Share your confession</h3>
                <p class="modal-sub">Completely anonymous. No name, no email, no tracking.</p>

                <div class="confession-form">
                    <label class="form-label" for="confessionText">Your confession</label>
                    <textarea class="form-textarea" id="confessionText" placeholder="I've never told anyone this, butâ€¦" maxlength="500"></textarea>
                    <div class="char-count" id="charCount">0 / 500</div>

                    <div class="form-select-row">
                        <div class="form-group">
                            <label class="form-label" for="confessionTag">Category</label>
                            <select class="form-select" id="confessionTag">
                                <option value="Life">Life</option>
                                <option value="Love">Love</option>
                                <option value="Work">Work</option>
                                <option value="Personal">Personal</option>
                                <option value="Social">Social</option>
                                <option value="Dreams">Dreams</option>
                                <option value="Nostalgia">Nostalgia</option>
                                <option value="Healing">Healing</option>
                                <option value="Friendship">Friendship</option>
                                <option value="Kindness">Kindness</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="confessionMood">Mood</label>
                            <select class="form-select" id="confessionMood">
                                <option value="ğŸ˜¶">ğŸ˜¶ Neutral</option>
                                <option value="ğŸ˜”">ğŸ˜” Sad</option>
                                <option value="ğŸ˜…">ğŸ˜… Embarrassed</option>
                                <option value="ğŸ˜‚">ğŸ˜‚ Funny</option>
                                <option value="ğŸ˜¤">ğŸ˜¤ Frustrated</option>
                                <option value="ğŸ¥º">ğŸ¥º Vulnerable</option>
                                <option value="ğŸ˜Œ">ğŸ˜Œ Relieved</option>
                                <option value="â¤ï¸">â¤ï¸ Loving</option>
                            </select>
                        </div>
                    </div>

                    <button class="submit-confession-btn" id="submitConfessionBtn" disabled>
                        Submit anonymously
                    </button>
                    <div class="pending-note">âœ¨ Confessions are reviewed before going live to keep this space safe.</div>
                </div>
            </div>

            <!-- Success view -->
            <div class="success-state" id="successView">
                <div class="success-icon">ğŸ¤«</div>
                <h3 class="success-title">Secret received!</h3>
                <p class="success-text">Your confession has been submitted anonymously.<br>It'll appear after a quick review.</p>
                <button class="success-back" id="successBack">Submit another</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
    // â”€â”€ CONFIG â€” Replace these with your Supabase credentials â”€â”€â”€â”€â”€â”€
    const SUPABASE_URL = 'YOUR_SUPABASE_URL_HERE';
    const SUPABASE_KEY = 'YOUR_SUPABASE_ANON_KEY_HERE';

    // â”€â”€ Fallback sample data (shows when Supabase isn't set up yet) â”€
    const SAMPLE_DATA = [
        { id:1,  text:"I secretly enjoy rainy days more than sunny ones. There's something peaceful about watching the rain from my window with a cup of tea.", created_at:"2024-01-10", tag:"Life", likes:142 },
        { id:2,  text:"I've been pretending to like coffee for years just to fit in at work meetings. I actually think it tastes terrible. Hot chocolate forever.", created_at:"2024-01-09", tag:"Work", likes:98 },
        { id:3,  text:"Sometimes I drive past my old house just to see if it still looks the same. It never does, and it makes me sadder every time.", created_at:"2024-01-08", tag:"Nostalgia", likes:211 },
        { id:4,  text:"I still sleep with a stuffed animal from my childhood. I'm 28 years old and I have absolutely no plans to stop.", created_at:"2024-01-07", tag:"Personal", likes:187 },
        { id:5,  text:"I pretend I haven't seen messages from certain people because I need time to recharge before responding. Social battery is a real thing.", created_at:"2024-01-06", tag:"Social", likes:134 },
        { id:6,  text:"I've written dozens of songs but never shared them with anyone. The fear of judgment keeps them locked in my notebook forever.", created_at:"2024-01-05", tag:"Dreams", likes:89 },
        { id:7,  text:"I cry watching cooking videos sometimes. Not because they're sad, but because there's something beautiful about someone taking care with food.", created_at:"2024-01-04", tag:"Life", likes:163 },
        { id:8,  text:"I turned down my dream job because it was in another city and I couldn't bear to leave my dog behind. I don't regret it.", created_at:"2024-01-03", tag:"Love", likes:221 },
        { id:9,  text:"I still check my old best friend's social media even though we had a falling out three years ago. I miss her every single day.", created_at:"2024-01-02", tag:"Friendship", likes:178 },
        { id:10, text:"I've started leaving anonymous kind notes in library books. I like imagining a stranger finding them on a hard day.", created_at:"2024-01-01", tag:"Kindness", likes:256 },
    ];

    // â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const supabaseReady = SUPABASE_URL !== 'YOUR_SUPABASE_URL_HERE';
    let confessions = [];
    let liked = new Set(JSON.parse(localStorage.getItem('liked') || '[]'));
    let likeCounts = {};
    let activeFilter = 'All';
    let page = 1;
    const PER_PAGE = 6;

    // â”€â”€ Supabase helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function sbFetch(path, opts = {}) {
        const res = await fetch(`${SUPABASE_URL}/rest/v1/${path}`, {
            headers: {
                'apikey': SUPABASE_KEY,
                'Authorization': `Bearer ${SUPABASE_KEY}`,
                'Content-Type': 'application/json',
                'Prefer': opts.prefer || '',
                ...opts.headers
            },
            ...opts
        });
        if (!res.ok) throw new Error(await res.text());
        return res.status === 204 ? null : res.json();
    }

    async function loadConfessions() {
        if (!supabaseReady) { confessions = SAMPLE_DATA; return; }
        try {
            const data = await sbFetch('confessions?select=*&approved=eq.true&order=likes.desc');
            confessions = data;
        } catch (e) {
            console.warn('Supabase error, using sample data:', e);
            confessions = SAMPLE_DATA;
        }
    }

    async function submitConfession(text, tag, mood) {
        if (!supabaseReady) throw new Error('Supabase not configured');
        await sbFetch('confessions', {
            method: 'POST',
            prefer: 'return=minimal',
            body: JSON.stringify({ text, tag, mood, likes: 0, approved: false })
        });
    }

    async function updateLike(id, newCount) {
        if (!supabaseReady) return;
        try {
            await sbFetch(`confessions?id=eq.${id}`, {
                method: 'PATCH',
                prefer: 'return=minimal',
                body: JSON.stringify({ likes: newCount })
            });
        } catch (e) { /* silent fail */ }
    }

    // â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function timeAgo(dateStr) {
        const diff = (Date.now() - new Date(dateStr)) / 1000;
        if (diff < 60) return 'just now';
        if (diff < 3600) return `${Math.floor(diff/60)}m ago`;
        if (diff < 86400) return `${Math.floor(diff/3600)}h ago`;
        if (diff < 604800) return `${Math.floor(diff/86400)}d ago`;
        return `${Math.floor(diff/604800)}w ago`;
    }

    function sortedByLikes(arr) { return [...arr].sort((a,b) => likeCounts[b.id] - likeCounts[a.id]); }
    function filtered() { const base = activeFilter === 'All' ? confessions : confessions.filter(c => c.tag === activeFilter); return sortedByLikes(base); }
    function totalLikesCount() { return Object.values(likeCounts).reduce((a,b) => a+b, 0); }
    function allTags() { return ['All', ...new Set(confessions.map(c => c.tag))]; }

    function showToast(msg, isError = false) {
        const t = document.getElementById('toast');
        t.textContent = msg;
        t.className = 'toast' + (isError ? ' error' : '') + ' show';
        setTimeout(() => t.className = 'toast' + (isError ? ' error' : ''), 3000);
    }

    // â”€â”€ Render stats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderStats() {
        document.getElementById('totalCount').textContent = confessions.length;
        document.getElementById('totalLikes').textContent = totalLikesCount().toLocaleString();
    }

    // â”€â”€ Like handler â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function handleLike(id, btn) {
        if (liked.has(id)) {
            liked.delete(id); likeCounts[id]--;
            btn.classList.remove('liked');
        } else {
            liked.add(id); likeCounts[id]++;
            btn.classList.add('liked');
        }
        btn.querySelector('.like-heart').textContent = liked.has(id) ? 'â¤ï¸' : 'ğŸ¤';
        btn.querySelector('.like-count').textContent = likeCounts[id];
        localStorage.setItem('liked', JSON.stringify([...liked]));
        updateLike(id, likeCounts[id]);
        renderStats();
        renderTrending();
    }

    function likeBtn(c) {
        const isLiked = liked.has(c.id);
        const btn = document.createElement('button');
        btn.className = 'like-btn' + (isLiked ? ' liked' : '');
        btn.innerHTML = `<span class="like-heart">${isLiked ? 'â¤ï¸' : 'ğŸ¤'}</span><span class="like-count">${likeCounts[c.id]}</span>`;
        btn.addEventListener('click', () => handleLike(c.id, btn));
        return btn;
    }

    // â”€â”€ Trending â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderTrending() {
        const grid = document.getElementById('trendingGrid');
        grid.innerHTML = '';
        sortedByLikes(confessions).slice(0, 3).forEach((c, i) => {
            const card = document.createElement('div');
            card.className = `trending-card rank-${i+1}`;
            card.style.animationDelay = `${i * 0.1}s`;
            card.innerHTML = `<div class="trending-rank">#${i+1}</div><p class="trending-text">${c.text}</p><div class="trending-footer"></div>`;
            const footer = card.querySelector('.trending-footer');
            footer.appendChild(likeBtn(c));
            const tag = document.createElement('span');
            tag.className = 'card-tag'; tag.textContent = c.tag;
            footer.appendChild(tag);
            grid.appendChild(card);
        });
    }

    // â”€â”€ Filters â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderFilters() {
        const bar = document.getElementById('filterBar');
        bar.innerHTML = '';
        allTags().forEach(cat => {
            const btn = document.createElement('button');
            btn.className = 'filter-btn' + (cat === activeFilter ? ' active' : '');
            btn.textContent = cat;
            btn.addEventListener('click', () => { activeFilter = cat; page = 1; renderFilters(); renderAll(); });
            bar.appendChild(btn);
        });
    }

    // â”€â”€ All confessions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderAll() {
        const grid = document.getElementById('allGrid');
        grid.innerHTML = '';
        const list = filtered();
        const visible = list.slice(0, page * PER_PAGE);
        if (!visible.length) { grid.innerHTML = `<div class="empty-state" style="grid-column:1/-1">No confessions in this category yetâ€¦</div>`; }
        visible.forEach((c, i) => {
            const card = document.createElement('div');
            card.className = 'confession-card';
            card.style.animationDelay = `${(i % PER_PAGE) * 0.07}s`;
            const dateStr = c.created_at ? timeAgo(c.created_at) : (c.date || '');
            const mood = c.mood ? `<span style="font-size:1.1rem">${c.mood}</span>` : '';
            card.innerHTML = `<p class="confession-text">${c.text}</p><div class="confession-footer"></div>`;
            const footer = card.querySelector('.confession-footer');
            const left = document.createElement('div');
            left.style.cssText = 'display:flex;align-items:center;gap:.5rem;';
            left.innerHTML = `${mood}<span class="confession-date">${dateStr}</span>`;
            footer.appendChild(left);
            const right = document.createElement('div');
            right.style.cssText = 'display:flex;align-items:center;gap:.6rem;';
            right.appendChild(likeBtn(c));
            const tag = document.createElement('span');
            tag.className = 'card-tag'; tag.textContent = c.tag;
            right.appendChild(tag);
            footer.appendChild(right);
            grid.appendChild(card);
        });
        document.getElementById('loadMoreBtn').style.display = visible.length >= list.length ? 'none' : 'inline-block';
    }

    // â”€â”€ Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function openModal() {
        document.getElementById('modal').classList.add('active');
        document.getElementById('formView').style.display = 'block';
        document.getElementById('successView').classList.remove('show');
    }
    function closeModal() { document.getElementById('modal').classList.remove('active'); }

    // â”€â”€ Form â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function initForm() {
        const textarea = document.getElementById('confessionText');
        const charCount = document.getElementById('charCount');
        const submitBtn = document.getElementById('submitConfessionBtn');

        textarea.addEventListener('input', () => {
            const len = textarea.value.length;
            charCount.textContent = `${len} / 500`;
            charCount.className = 'char-count' + (len > 450 ? ' warn' : '') + (len >= 500 ? ' over' : '');
            submitBtn.disabled = len < 10;
        });

        submitBtn.addEventListener('click', async () => {
            const text = textarea.value.trim();
            const tag = document.getElementById('confessionTag').value;
            const mood = document.getElementById('confessionMood').value;
            if (text.length < 10) return;

            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="spinner"></span>Submittingâ€¦';

            try {
                await submitConfession(text, tag, mood);
                document.getElementById('formView').style.display = 'none';
                document.getElementById('successView').classList.add('show');
                textarea.value = '';
                charCount.textContent = '0 / 500';
            } catch (e) {
                showToast('Submission failed. Please try again.', true);
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Submit anonymously';
            }
        });

        document.getElementById('successBack').addEventListener('click', () => {
            document.getElementById('successView').classList.remove('show');
            document.getElementById('formView').style.display = 'block';
            document.getElementById('submitConfessionBtn').innerHTML = 'Submit anonymously';
        });
    }

    // â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.addEventListener('DOMContentLoaded', async () => {
        await loadConfessions();
        likeCounts = Object.fromEntries(confessions.map(c => [c.id, c.likes || 0]));
        renderStats(); renderTrending(); renderFilters(); renderAll();
        initForm();

        document.getElementById('navShareBtn').addEventListener('click', openModal);
        document.getElementById('heroShareBtn').addEventListener('click', openModal);
        document.getElementById('modalClose').addEventListener('click', closeModal);
        document.getElementById('modal').addEventListener('click', e => { if (e.target === document.getElementById('modal')) closeModal(); });
        document.getElementById('loadMoreBtn').addEventListener('click', () => { page++; renderAll(); });
    });
    </script>
</body>
</html>
